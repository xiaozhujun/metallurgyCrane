<script type="text/javascript">
  var gd;
  var rgd;
  var time;
  var token;
  $(document).ready(function(){
    simpleTree($("#mTree"));

    $(".monitorForcast .itemContent .bullet").click(function(event){
      $("#graphTitle").text($(this).text());
      var data = RGraph.array_pad([], 60);
      if (typeof(gd)!="undefined") {
        gd.stopDrawing();
      } 
      if (typeof(rgd)!="undefined") {
        if (typeof(token)!="undefined") {
          clearInterval(token);
        }
      } 
      if (typeof(gd1)!="undefined") {
        gd1.stopDrawing();
      } 
      if (typeof(rgd1)!="undefined") {
        if (typeof(token1)!="undefined") {
          clearInterval(token1);
        }
      } 
      if($(this).attr("real")=="true"){
        if (typeof(time)=="undefined") {time = 0;}
        var sensorId = $(this).attr("sensorNum");
        rgd = new RealGraphDrawer("graphContent1", data);
        token = setInterval(function(){
          $.ajax({
            url:$.URL.sensor.getDataWithTime+sensorId+".htm",
            dataType:'jsonp',
            success: function(response) {
              rgd.drawGraph(response.data);
            }
          });
        }, 1000);
      } else {
        gd = new GraphDrawer("graphContent1", data);
        gd.drawGraph();
      }
      event.stopPropagation();
    });
    $("#yingbing11").trigger("click");

  });

</script>

<div id="mTree" domain="structure" class="monitorForcast">
  <div class="treeItem">
        <div class="itemTitle titleShow">桥架</div>
        <div class="itemContent contentShow">
          <div class="treeItem">
            <div class="itemTitle titleShow">主梁左</div>
            <div class="itemContent contentShow">
              <div class="bullet" real="true" sensorNum="101" id="yingbing101">101应变</div>
              <div class="bullet" real="true" sensorNum="102" id="yingbing102">102应变</div>
              <div class="bullet" real="true" sensorNum="103" id="yingbing103">103温度</div>
              <div class="bullet" real="true" sensorNum="104" id="yingbing104">104应变</div>
            </div>
          </div>
          <div class="treeItem">
            <div class="itemTitle">端梁左</div>
            <div class="itemContent">
              <div class="bullet" real="true" sensorNum="105" id="yingbing105">105应变</div>
              <div class="bullet" real="true" sensorNum="106" id="yingbing106">106温度</div>
            </div>
          </div>

          <div class="treeItem">
            <div class="itemTitle">主梁右</div>
            <div class="itemContent">
              <div class="bullet" real="true" sensorNum="201" id="yingbing201">201应变</div>
              <div class="bullet" real="true" sensorNum="202" id="yingbing202">202应变</div>
              <div class="bullet" real="true" sensorNum="203" id="yingbing203">203温度</div>
              <div class="bullet" real="true" sensorNum="204" id="yingbing204">204应变</div>
            </div>
          </div>
          <div class="treeItem">
            <div class="itemTitle">端梁右</div>
            <div class="itemContent">
              <div class="bullet" real="true" sensorNum="205" id="yingbing205">205应变</div>
              <div class="bullet" real="true" sensorNum="206" id="yingbing206">206温度</div>
            </div>
          </div>

      </div>
</div>
</div>